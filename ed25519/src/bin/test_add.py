P = 2**255 - 19
D = pow(121666, P - 2, P) - 1;

print((2 * -7) % P)
print((2 * -472268759938110625622824785352915578001432258900265237190564369304728646195033505047516790369922900318679953813930015786830629522119352625245844870504700) % P)

def point_add(p: (int, int, int, int), q: (int, int, int, int)) -> (int, int, int, int):
    a = (p[1] - p[0]) * (q[1] - q[0]) % P
    b = (p[1] + p[0]) * (q[1] + q[0]) % P
    c = 2 * p[3] * q[3] * D % P
    d = 2 * p[2] * q[2] % P

    print("a:", a)
    print("b:", b)
    print("c:", c)
    print("d:", d)

    e = b - a
    f = d - c
    g = d + c
    h = b + a

    return (e * f, g * h, f * g, e * h)

assert P == 57896044618658097711785492504343953926634992332820282019728792003956564819949
assert D == 37095705934669439343138083508754565189542113879843219016388785533085940283555

sum = point_add(
    (
        -296018569523652896372234514327709550206908554287152058624460862838859047041084022801327206127550044265769833862414983365876661076483822655155324979117350,
        1490495321877056891969153563203901731061912970822103855338626923326930450369546055809989262026333609603664456667855626969875010168057827705323189208562226,
        -472268759938110625622824785352915578001432258900265237190564369304728646195033505047516790369922900318679953813930015786830629522119352625245844870504700,
        934244079836156744814377949647390897099953823983631381324122244125069081065138972390096358496487455289554769813310888065787613665947803319614067579747813,
    ),
    (0, 1, 1, 0)
)

print(sum)
assert sum == (
    -96720069842460291797938870517886859962485740142320070423613995671740497718858311798775495828584144407663446509877413375795620722700305351282730487751411,
    2445976220003203967096891697700621578629252374160621852127530226297368368906708146503108862027047256192963442974854511196621032246716669431448327848201179,
    548709829761699606984552933499151766797648929301152071422878665786736660760034763091932596573004173478455124607409578148995930233169982001819914108226761,
    -431147717791841962355427150511426056796771870726164855195374766048111118495319433478986200978311134275491162180364095474437485097374411865782309907037529,
);